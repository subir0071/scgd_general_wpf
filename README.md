# scgd_general_wpf

## 🖥️ 支持

**运行环境** NET 6.0 , VS2022 , Win11 
**分辨率**：1920x1080,100%
**项目特性**

- 支持操作系统：Win10,Win11
- 支持开机自启，恢复上次关闭的窗口布局
- 支持主题模式：深色，浅色，跟随系统
- I18n：English, 简体中文，繁体中文，日本語,한국어，跟随系统
- 支持热键控制，全局和窗口模式可以切换和保存
- 计划任务设置

[更新日志](CHANGELOG.md)

## 主窗口

1.菜单区  

2.操作区

3.状态栏

目前状态栏实现有三种方式，可以直接修改，也可以实现状态栏的接口。目前 Mysql，MQTT，RC 实现了该接口，另一个接口 实现了 时间，内存，CPU等一些程序状态的显示

4.设置窗口

配置窗口用户管理配置，需要由用户自行实现管理的内容

5.视图窗口  

视图窗口由IView实现，目前提供，独立窗口模式，隐藏模式，以及指定窗口布局模式，用户可以自行选择实现指定的窗口布局逻辑。

## Engine

使用流程引擎执行程序，用户可以在窗口中对流程的具体参数进行配置

目前程序分成 Flow  流程窗口。

用户可以创建某个具体的服务，并且下方设置对面的设备。

用户操作使用 MQTT 发送，所以使用指令前请检查 MQTT 服务器是否连接。

### 服务:

目前支持配置的服务为 相机，校正，算法，光谱仪，PG，传感器，源表，电机，文件服务器。

用户可以创建，修改，加载，服务的配置，并且在控制区中显示。

#### 物理相机：

目前支持的相机有 LV，BV ,CV  等，可以配置快速模式以及其他的模式

用户在使用之前需要先配置物理相机，配置 许可证，以及对映的校准文件后，在相机设备中关联物理相机后可以使用

### 模板

用户可以 对模板进行 创建，编辑，删除，导入导出，重命名等操作。

现在创建模板，需要先指定 模板名称。

现在导出模板可以导出多个为压缩包。

现在用户可以对模板进行快速检测。

现在模板保存在数据库中，用户需要先正确连接数据库，才可以进行操作。目前模板不支持数据库在不连接的情况下使用。

### 分类：

流程：用户根据配置的参数，设置每一个具体的模板

关注点：用户可以在图像中绘制关注点模板，并保存。 

合规校验： 合规校验模板需要配合关注点模板使用 ，目前支持的模式有，均值合规，点合规，后续会支持更多模式

校准：用户需要在物理相机中配置具体的校准文件。目前不允许在模板窗口修改校准文件，只能选择。

算法：目前支持：提取关注点，MTF ，FOV ,鬼影，畸变，SFR 等。

光谱仪：

源表：



## 主题模式

主题模式，支持 深色，浅色，跟随系统， 在 菜单，配置，热键中都可以切换。

跟随系统模式，跟随Window系统中的 APP 样式。

主体依赖   HandyControl ，其他依赖  Extended.Wpf.ToolKit ，WPF-UI, Panuon.WPF.UI.  等。 可以自行添加或者删减

主要通过切换样式资源实现，可以实现运行中加载。

## I18n：

支持  English, 简体中文，繁体中文，日本語,한국어，俄语，跟随系统

跟随系统跟随Window系统的标准语言。

语言功能由 C# 原生提供， 通过资源文件 进行添加和生成， 用户可以通过  Resx Manager ，以及 对映的翻译进行实现，也可以通过修改 MultilingualResources 进行实现。MultilingualResources  生成的文件可以交与专门的翻译团队，进行更准确的翻译。

语言功能 因为使用 C# 原生设计模式，不支持 运行中切换 语言。需要在重新启动时，修改线程的配置语言，这样 C# 会自己读取对映的资源。

也可以使用 和主题相同的切换样式的功能实现，这样就可以在运行中修改语言。 （并不复杂，但这样多语言的修改过于繁琐，不如自带的工具）

## 热键

目前支持 窗口模式和全局模式两种实现。目前 全局和窗口模式可以切换保存以及加载。

热键 目前 可以在配置 中进行变更和管理，用户可以选择不不启用热键。



## 插件：

用户可以自行实现插件的接口IPlugin， 放入 Plugins  中，程序在启动时会自动加载，暂时不支持热加载



## 项目：

目前项目实现和窗口功能实现解耦，用户可以选择直接打开项目，也可以选择显示 菜单接口，使用插件加载的模式，将程序放入菜单中执行。

用户可以自行实现和修改项目的布局，以及调用软件。



## 工程：

用户可以打开，创建一个工程，并可以在工程中导入和导出文件。  cvproject cvsolution

用户可以直接打开工程文件，进入程序。

用户可以打开图像进行预览和操作图片。

用户可以在工程中实现对工程中图像的后处理操作。

用户可以在工程中导出文件

### 自定义文件：

cvcie,cvraw,cvsrc

### 归档和导出数据

用户目前可以在工程窗口下，找到存储在数据库中的数据，并归档和阅览，以及导入到工程中等操作。





## 任务计划程序

用户可以执行选择已经创建好的任务进行执行，通常用于循环测试，或者是定期执行程序。

目前支持 立即启动，延迟启动，一次执行，多次执行，重复执行， 支持通过Cron 配置执行次数。



## 更新

目前更新支持三种模式，手动更新，在配置中设置软件时检测更新，任务计划程序中，设置定时检测。

软件更新后，如果出现无法打开的情况，用户可以在软件安装目录中，ColorVisionSetup选择重新下载更新程序进行更新

可以在配置文件中修改更新地址 UpdatePath  ，目前不支持在程序中配置 ，如果配置错误，删除改项后，会自动重置

## 翻译API：

Google apikey  AIzaSyBElxN8V59CXS0ML-Q5YC7Do-Rza8FGawE

Baidu  AppID：20180402000142443

​            SecretKey:bTLryuKSa4vWCJLs0ECO













